
# Data-set



```{r}
library(tidyverse) # This includes readr!
library(xtable) # For displaying LaTeX tables
library(modelsummary) # For displaying regression models in tables
library(stargazer) # For displaying regression models in tables
library(jtools) # For displaying regression models in tables
library(kableExtra) # For displaying or changing tables
library(gt) # For displaying tables
library(gtsummary) # For model reporting inline and in tables
library(broom) # For working with statistical models
library(car) # For type-III anova tests
library(report) # For automated text-based model reporting
library(effects) # For working with statistical models / visualize effects
library(ggeffects) # For working with statistical models / visualize effects
library(patchwork) # For putting different visualizations in one figure
library(janitor)

dataset <- read_delim("02-data/cost-of-living-2017.csv", 
                      delim = "\t", escape_double = FALSE, 
                      trim_ws = TRUE)
continents <- read_csv("02-data/continents2.csv")

head(dataset)

dataset <- janitor::clean_names(dataset)

#Die Spalte region bei Dataset hinzufügen; Kosovo muss separat hinzugefügt werden, ist nicht vorhanden bei continents
manipulated_continents <- rename(continents, country=name)

manipulated_data <- left_join(dataset, select(manipulated_continents, country, region), by="country")

#Prüfen, ob eine Region na ist -> Ergebnis: Kosovo ist na
filter(manipulated_data, is.na(region))
#Da Kosovo na ist, die Zelle in "Europe" ändern
manipulated_data[486, 12] <- "Europe"

dd <- read_delim("02-data/developed_and_developing_countries.csv",
                 delim = ";", escape_double = FALSE,
                 trim_ws = TRUE)
dd <- janitor::clean_names(dd)
dd$category[dd$category == "developed"] <- 1.0
dd$category[dd$category == "developing"] <- 0.0
dd$category <- as.double(dd$category)


dd$category[dd$category == "developing"] <- 0.0
dd$country[dd$country == "italy"] <- "Italy"
dd$country[dd$country == "Hong Kong SAR"] <- "Hong Kong"
dd$country[dd$country == "Taiwan Province of China"] <- "Taiwan"
dd$country[dd$country == "Russian Federation"] <- "Russia"
dd$country[dd$country == "Viet Nam"] <- "Vietnam"
dd$country[dd$country == "Bosnia and Herzegovina"] <- "Bosnia And Herzegovina"
dd$country[dd$country == "Kosovo"] <- "Kosovo (Disputed Territory)"


colnames(dd)[2] <- "development"

dataWithCategory <- left_join(manipulated_data,dd, by="country")

#Prüfen, ob irgendwo ein 'NA' ist
dataToCorrectCity <- filter(dataWithCategory, is.na(city))
dataToCorrectCountry <- filter(dataWithCategory, is.na(country))
dataToCorrectCliPlusRentIndex <- filter(dataWithCategory, is.na(cost_of_living_plus_rent_index))
dataToCorrectCli <- filter(dataWithCategory, is.na(cli))
dataToCorrectRentIndex <- filter(dataWithCategory, is.na(rent_index))
dataToCorrectGroceriesIndex <- filter(dataWithCategory, is.na(groceries_index))
dataToCorrectRestaurantPriceIndex <- filter(dataWithCategory, is.na(restaurant_price_index))
dataToCorrectLocalPurchasingPowerIndex <- filter(dataWithCategory, is.na(local_purchasing_power_index))
dataToCorrectRegion <- filter(dataWithCategory, is.na(region))
dataToCorrectDevelopment <- filter(dataWithCategory, is.na(development))

#source for data-hange: https://www.laenderdaten.info/entwicklungslaender.php



#Output nach Regionen und Anzahl an Datensätzen anzeigen
ggplot(data = manipulated_data, aes(x = region)) +
  geom_bar() +
  ggtitle("Region - Count data") +
  xlab("Regions") +
  ylab("Number of Data") +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))

#Als Tabelle mit Werten:
manipulated_data %>% count(region)


#Split into two datasets with developing countries and industrial countries
developingCountries <- filter(dataWithCategory, development==0)

industrialCountries <- filter(dataWithCategory, development==1)


# t-Test for difference between developing and industrial countries:
test1 <- t.test(cost_of_living_plus_rent_index ~ development, data=dataWithCategory, var.equal=TRUE)
test1_glance <- glance(test1)
test1
test1_glance

#TODO: interpret these results

```